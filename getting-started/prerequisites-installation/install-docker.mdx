---
title: "Docker Installation (Optional)"
description: "Instructions for pulling or building the Dory Docker image. Explains how to set up and run Dory in a container for those preferring Docker-based workflows."
---

# Docker Installation (Optional)

This guide walks you through pulling or building the official Dory Docker image and running Dory inside a container. Docker offers a fast, portable, and isolated way to run your documentation site without needing Node.js or other local dependencies.

---

## 1. Why Use Docker for Dory?

Running Dory in Docker lets you:

- **Isolate your environment** from host OS variations
- **Simplify setup** by launching a pre-configured image
- **Ensure consistency** across development, CI, and production
- **Serve static sites seamlessly** via lightweight containerized Nginx

If you prefer managing local Node.js and npm installations, you can skip this section and proceed with the CLI installation and regular setup.

---

## 2. Prerequisites

Before proceeding, make sure you have the following:

- [Docker](https://www.docker.com/get-started) installed and running on your computer
- Basic familiarity with Docker commands
- Your Dory documentation project files ready locally (including `dory.json` and your `.mdx` docs)

> Note: Docker is optional but recommended for users who want fast deployment without setup complexity.

---

## 3. Pulling the Official Dory Docker Image

The simplest way to get started is to pull the official Dory image published on Docker Hub.

Run this command:

```bash
docker pull clidey/dory:latest
```

This image contains Dory CLI version **0.20.0** built on Node 22.16-alpine Linux.

---

## 4. Building a Custom Dory Docker Image Locally

If you want to build the Docker image yourself—e.g., to customize or run from source—you can use the provided Dockerfile located in the `k8s` directory.

### Step 1: Build the Docker Image

Run this command in the root of your project repository (where `k8s/Dockerfile` is located):

```bash
docker build -f k8s/Dockerfile --tag dory-docs:latest .
```

This will execute the following actions:

- Start from a lightweight Node 22.16 Alpine base image
- Install Git and other dependencies
- Globally install the Dory CLI (version 0.20.0)
- Copy static assets like the Dory logo and Nginx config
- Expose port 3000

### Step 2: Verify the Image Creation

After build completes, verify your image exists:

```bash
docker images | grep dory-docs
```

Expected output should list `dory-docs` with the `latest` tag.

---

## 5. Running Dory in a Docker Container

You can run your static site using the Dory CLI in preview mode inside the container.

### Step 1: Prepare Your Local Documentation Folder

Ensure your documentation source files are in the current directory or a specific directory you want to mount.

### Step 2: Run the Docker Container

Run this command from your project root:

```bash
docker run -it --rm -v "$PWD":/app -p 3000:3000 dory-docs:latest dory preview
```

Explanation:

- `-v "$PWD":/app` mounts your local directory inside the container at `/app`
- `-p 3000:3000` maps port 3000 from container to your machine
- `dory preview` runs the preview command inside the container

### Step 3: Access the Preview

Open your browser and navigate to:

```
http://localhost:3000
```

You should see your documentation site served by the Dory preview server.

---

## 6. Building a Production-Ready Static Site with Docker and Nginx

For production, serving your static site using Nginx inside a container is recommended for performance.

### Method 1: Using the Provided Multi-stage Dockerfile

The `k8s/docs.Dockerfile` uses a multi-stage build:

- Stage 1: Builds the site inside Node 20-alpine
- Stage 2: Copies the build output into a minimal Nginx container

Build and run this production image:

```bash
docker build -f k8s/docs.Dockerfile -t dory-static-site:1.0 .
```

Then run:

```bash
docker run -it -p 8080:80 dory-static-site:1.0
```

Now browse to `http://localhost:8080` to view your static documentation served by Nginx.

### Method 2: DIY Using Custom Dockerfile

You can create a Dockerfile like the example below and build it yourself:

```dockerfile
FROM clidey/dory
WORKDIR /app
COPY . .
RUN dory build
CMD ["dory", "preview"]
```

Build and run:

```bash
docker build -t my-dory-site .
docker run -it -p 3000:3000 my-dory-site
```

This setup runs the 'dory preview' server but is less optimized than the Nginx static serving.

---

## 7. Best Practices and Tips

- Always mount your local docs folder (`-v`) to ensure container sees latest content
- Use the multi-stage Nginx-based image for production deployments
- Expose and map the correct ports (`3000` or `80` depending on setup)
- Clean up dangling images regularly with `docker image prune`
- Use `--rm` flag for ephemeral container runs to avoid clutter

---

## 8. Troubleshooting Common Docker Issues

<AccordionGroup title="Common Problems and Solutions">
<Accordion title="Docker Build Fails with Missing Files">
Ensure you run the build command in the root of the repo and that all required files (`k8s/Dockerfile`) are present. Also confirm `.dockerignore` does not exclude needed files.
</Accordion>
<Accordion title="Port Conflicts When Running Containers">
Check if the target port is already used on your host (e.g., `sudo lsof -i :3000`). Either stop the conflicting process or map to a different host port like `-p 8080:3000`.
</Accordion>
<Accordion title="Files Not Updating Inside the Container">
Verify your volume mount syntax is correct and that you mapped the current directory with `-v "$PWD":/app`. On Windows, use the appropriate path format.
</Accordion>
<Accordion title="Site Not Visible in Browser">
Check firewall settings and ensure Docker Desktop allows connections on the exposed ports.
Check container logs for errors with `docker logs <container_id>`.
</Accordion>
</AccordionGroup>

---

## 9. Summary

Using Docker with Dory gives you a powerful, reproducible way to build and serve your technical documentation sites. Whether for local preview or production deployment, the official Docker images and provided Dockerfiles accelerate your workflow and minimize environment inconsistencies.

---

## 10. References

- [Dory Official Docker Image on Docker Hub](https://hub.docker.com/r/clidey/dory)
- [Dory CLI Usage](#) (see Installing the CLI for alternative setup)
- [Multi-stage Dockerfile Source](https://github.com/clidey/dory/blob/main/k8s/docs.Dockerfile) <br/>
- [Nginx Configuration for Static Server](https://github.com/clidey/dory/blob/main/k8s/config/nginx-default.conf)

---

## Appendix: Example Commands Summary

```bash
# Pull official Dory image
docker pull clidey/dory:latest

# Build Docker image from local Dockerfile
docker build -f k8s/Dockerfile --tag dory-docs:latest .

# Run preview server with volume mount
docker run -it --rm -v "$PWD":/app -p 3000:3000 dory-docs:latest dory preview

# Build production multi-stage image
docker build -f k8s/docs.Dockerfile -t dory-static-site:1.0 .

# Run production static site with Nginx
docker run -it -p 8080:80 dory-static-site:1.0
```

---

For ongoing support, refer to the main Dory documentation and community forums.


---

<Check>
You have successfully set up and run Dory using Docker. Your site should be available locally with your chosen port mapping.
</Check>